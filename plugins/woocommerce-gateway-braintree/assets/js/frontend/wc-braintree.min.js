jQuery(document).ready(function(e){"use strict";function n(n){var r=e("input[name=braintree-cc-token]:radio").filter(":checked").val(),s=[],o=e("#braintree-cc-number").val(),u=e("#braintree-cc-cvv").val(),a=e("#braintree-cc-exp-month").val(),f=e("#braintree-cc-exp-year").val();if("undefined"!=typeof r&&""!==r){if("undefined"!=typeof u){u?/\D/.test(u)?s.push(braintree_params.cvv_invalid):(u.length<3||u.length>4)&&s.push(braintree_params.cvv_length_invalid):s.push(braintree_params.cvv_missing);if(s.length>0){e(".woocommerce-error, .woocommerce-message").remove();n.prepend('<ul class="woocommerce-error"><li>'+s.join("</li><li>")+"</li></ul>");n.removeClass("processing").unblock();n.find(".input-text, select").blur();e("html, body").animate({scrollTop:n.offset().top-100},1e3);return!1}t.encryptForm(n);return!0}return!0}o=o.replace(/-|\s/g,"");o?(o.length<12||o.length>19||/\D/.test(o)||!i(o))&&s.push(braintree_params.card_number_invalid):s.push(braintree_params.card_number_missing);var l=(new Date).getFullYear();(/\D/.test(a)||/\D/.test(f)||a>12||a<1||f<l||f>l+20)&&s.push(braintree_params.card_exp_date_invalid);"undefined"!=typeof u&&(u?/\D/.test(u)?s.push(braintree_params.cvv_invalid):(u.length<3||u.length>4)&&s.push(braintree_params.cvv_length_invalid):s.push(braintree_params.cvv_missing));if(s.length>0){e(".woocommerce-error, .woocommerce-message").remove();n.prepend('<ul class="woocommerce-error"><li>'+s.join("</li><li>")+"</li></ul>");n.removeClass("processing").unblock();n.find(".input-text, select").blur();e("html, body").animate({scrollTop:n.offset().top-100},1e3);return!1}e("#braintree-cc-number").val(o);t.encryptForm(n);return!0}function r(){e("input[name=braintree-cc-token]:radio").change(function(){var t=e(this).filter(":checked").val(),n=e("div.braintree-new-card"),r=e("#braintree-cc-cvv-section");if(""!==t){n.slideUp(200);r.removeClass("form-row-last")}else{n.slideDown(200);r.addClass("form-row-last ")}}).change()}function i(e){var t=0;for(var n=0,r=e.length;n<r-1;n++){var i=parseInt(e.substr(r-(n+2),1)*(2-n%2));t+=i<10?i:i-9}return e.substr(r-1)==(10-t%10)%10}var t=Braintree.create(braintree_params.cse_key);if(e("form.checkout").length){e("body").bind("updated_checkout",function(){r()});e("form.checkout").bind("checkout_place_order_braintree",function(){return n(e(this))})}else{r();e("form#order_review").submit(function(){if("braintree"==e("#order_review input[name=payment_method]:checked").val())return n(e(this))})}});